// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`resolver code printer CodeDocument prints document template 1`] = `
"import { util, runtime, Context } from "@aws-appsync/utils";
import * as ddb from "@aws-appsync/utils/dynamodb";
export function request(ctx: Context<unknown, Record<string, unknown>, undefined, undefined>) {
  const { args: { input }, identity } = ctx
  if (!ctx.identity) {
    return runtime.earlyReturn(null)
  }
  
  const id = input.id ?? util.autoId()
  const createdAt = input.createdAt ?? util.time.nowISO8601()
  const updatedAt = input.updatedAt ?? createdAt
  const item = { ...input, id: id, createdAt: createdAt, updatedAt: updatedAt, userId: identity.sub, __typename: "Task", _sk: \`Task\${id}\`, _version: 1 }
  return ddb.put({ key: { id: item.id }, item: item, condition: { id: { attributeExists: false } } })
}

export function response(ctx: Context<unknown, Record<string, unknown>, undefined, undefined, unknown>) {
  const { error, result } = ctx
  if (error) {
    util.error(error.message, erorr.type)
  }
  
  return result
}
"
`;

exports[`resolver code printer CodeDocument serialize document ast 1`] = `
{
  "_kind": "CodeDocument",
  "body": [
    {
      "_kind": "ImportDeclaration",
      "from": {
        "_kind": "Literal",
        "type": "string",
        "value": "@aws-appsync/utils",
      },
      "specifiers": [
        {
          "_kind": "ModuleNamedSpecifier",
          "alias": undefined,
          "value": {
            "_kind": "Identifier",
            "name": "util",
            "type": undefined,
          },
        },
        {
          "_kind": "ModuleNamedSpecifier",
          "alias": undefined,
          "value": {
            "_kind": "Identifier",
            "name": "runtime",
            "type": undefined,
          },
        },
        {
          "_kind": "ModuleNamedSpecifier",
          "alias": undefined,
          "value": {
            "_kind": "Identifier",
            "name": "Context",
            "type": undefined,
          },
        },
      ],
    },
    {
      "_kind": "ImportDeclaration",
      "from": {
        "_kind": "Literal",
        "type": "string",
        "value": "@aws-appsync/utils/dynamodb",
      },
      "specifiers": [
        {
          "_kind": "ModuleNamespaceSpecifier",
          "alias": {
            "_kind": "Identifier",
            "name": "ddb",
            "type": undefined,
          },
        },
      ],
    },
    {
      "_kind": "ExportDeclaration",
      "specifier": {
        "_kind": "FunctionDeclaration",
        "body": {
          "_kind": "BlockStatement",
          "statements": [
            {
              "_kind": "VariableDeclaration",
              "name": {
                "_kind": "Object",
                "properties": [
                  {
                    "_kind": "Property",
                    "name": "args",
                    "value": {
                      "_kind": "Object",
                      "properties": [
                        {
                          "_kind": "Identifier",
                          "name": "input",
                          "type": undefined,
                        },
                      ],
                    },
                  },
                  {
                    "_kind": "Identifier",
                    "name": "identity",
                    "type": undefined,
                  },
                ],
              },
              "type": "const",
              "value": {
                "_kind": "Identifier",
                "name": "ctx",
                "type": undefined,
              },
            },
            {
              "_kind": "IfStatement",
              "alternate": undefined,
              "condition": {
                "_kind": "UnaryExpression",
                "argument": {
                  "_kind": "Identifier",
                  "name": "ctx.identity",
                  "type": undefined,
                },
                "operator": "!",
              },
              "consequent": {
                "_kind": "BlockStatement",
                "statements": [
                  {
                    "_kind": "ReturnStatement",
                    "value": {
                      "_kind": "CallExpression",
                      "arguments": [
                        {
                          "_kind": "Literal",
                          "type": "null",
                          "value": "null",
                        },
                      ],
                      "callee": {
                        "_kind": "Identifier",
                        "name": "runtime.earlyReturn",
                        "type": undefined,
                      },
                      "optional": false,
                    },
                  },
                ],
              },
            },
            {
              "_kind": "VariableDeclaration",
              "name": {
                "_kind": "Identifier",
                "name": "id",
                "type": undefined,
              },
              "type": "const",
              "value": {
                "_kind": "LogicalExpression",
                "left": {
                  "_kind": "Identifier",
                  "name": "input.id",
                  "type": undefined,
                },
                "operator": "??",
                "right": {
                  "_kind": "CallExpression",
                  "arguments": [],
                  "callee": {
                    "_kind": "Identifier",
                    "name": "util.autoId",
                    "type": undefined,
                  },
                  "optional": false,
                },
              },
            },
            {
              "_kind": "VariableDeclaration",
              "name": {
                "_kind": "Identifier",
                "name": "createdAt",
                "type": undefined,
              },
              "type": "const",
              "value": {
                "_kind": "LogicalExpression",
                "left": {
                  "_kind": "Identifier",
                  "name": "input.createdAt",
                  "type": undefined,
                },
                "operator": "??",
                "right": {
                  "_kind": "CallExpression",
                  "arguments": [],
                  "callee": {
                    "_kind": "Identifier",
                    "name": "util.time.nowISO8601",
                    "type": undefined,
                  },
                  "optional": false,
                },
              },
            },
            {
              "_kind": "VariableDeclaration",
              "name": {
                "_kind": "Identifier",
                "name": "updatedAt",
                "type": undefined,
              },
              "type": "const",
              "value": {
                "_kind": "LogicalExpression",
                "left": {
                  "_kind": "Identifier",
                  "name": "input.updatedAt",
                  "type": undefined,
                },
                "operator": "??",
                "right": {
                  "_kind": "Identifier",
                  "name": "createdAt",
                  "type": undefined,
                },
              },
            },
            {
              "_kind": "VariableDeclaration",
              "name": {
                "_kind": "Identifier",
                "name": "item",
                "type": undefined,
              },
              "type": "const",
              "value": {
                "_kind": "Object",
                "properties": [
                  {
                    "_kind": "SpreadElement",
                    "argument": {
                      "_kind": "Identifier",
                      "name": "input",
                      "type": undefined,
                    },
                  },
                  {
                    "_kind": "Property",
                    "name": "id",
                    "value": {
                      "_kind": "Identifier",
                      "name": "id",
                      "type": undefined,
                    },
                  },
                  {
                    "_kind": "Property",
                    "name": "createdAt",
                    "value": {
                      "_kind": "Identifier",
                      "name": "createdAt",
                      "type": undefined,
                    },
                  },
                  {
                    "_kind": "Property",
                    "name": "updatedAt",
                    "value": {
                      "_kind": "Identifier",
                      "name": "updatedAt",
                      "type": undefined,
                    },
                  },
                  {
                    "_kind": "Property",
                    "name": "userId",
                    "value": {
                      "_kind": "Identifier",
                      "name": "identity.sub",
                      "type": undefined,
                    },
                  },
                  {
                    "_kind": "Property",
                    "name": "__typename",
                    "value": {
                      "_kind": "Literal",
                      "type": "string",
                      "value": "Task",
                    },
                  },
                  {
                    "_kind": "Property",
                    "name": "_sk",
                    "value": {
                      "_kind": "Literal",
                      "type": "template",
                      "value": "Task\${id}",
                    },
                  },
                  {
                    "_kind": "Property",
                    "name": "_version",
                    "value": {
                      "_kind": "Literal",
                      "type": "number",
                      "value": "1",
                    },
                  },
                ],
              },
            },
            {
              "_kind": "ReturnStatement",
              "value": {
                "_kind": "CallExpression",
                "arguments": [
                  {
                    "_kind": "Object",
                    "properties": [
                      {
                        "_kind": "Property",
                        "name": "key",
                        "value": {
                          "_kind": "Object",
                          "properties": [
                            {
                              "_kind": "Property",
                              "name": "id",
                              "value": {
                                "_kind": "Identifier",
                                "name": "item.id",
                                "type": undefined,
                              },
                            },
                          ],
                        },
                      },
                      {
                        "_kind": "Property",
                        "name": "item",
                        "value": {
                          "_kind": "Identifier",
                          "name": "item",
                          "type": undefined,
                        },
                      },
                      {
                        "_kind": "Property",
                        "name": "condition",
                        "value": {
                          "_kind": "Object",
                          "properties": [
                            {
                              "_kind": "Property",
                              "name": "id",
                              "value": {
                                "_kind": "Object",
                                "properties": [
                                  {
                                    "_kind": "Property",
                                    "name": "attributeExists",
                                    "value": {
                                      "_kind": "Literal",
                                      "type": "boolean",
                                      "value": "false",
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                        },
                      },
                    ],
                  },
                ],
                "callee": {
                  "_kind": "Identifier",
                  "name": "ddb.put",
                  "type": undefined,
                },
                "optional": false,
              },
            },
          ],
        },
        "name": {
          "_kind": "Identifier",
          "name": "request",
          "type": undefined,
        },
        "parameters": [
          {
            "_kind": "Identifier",
            "name": "ctx",
            "type": {
              "_kind": "TypeIdentifier",
              "name": "Context",
              "parameters": [
                {
                  "_kind": "TypeIdentifier",
                  "name": "unknown",
                  "parameters": undefined,
                },
                {
                  "_kind": "TypeIdentifier",
                  "name": "Record",
                  "parameters": [
                    {
                      "_kind": "TypeIdentifier",
                      "name": "string",
                      "parameters": undefined,
                    },
                    {
                      "_kind": "TypeIdentifier",
                      "name": "unknown",
                      "parameters": undefined,
                    },
                  ],
                },
                {
                  "_kind": "TypeIdentifier",
                  "name": "undefined",
                  "parameters": undefined,
                },
                {
                  "_kind": "TypeIdentifier",
                  "name": "undefined",
                  "parameters": undefined,
                },
              ],
            },
          },
        ],
      },
    },
    {
      "_kind": "ExportDeclaration",
      "specifier": {
        "_kind": "FunctionDeclaration",
        "body": {
          "_kind": "BlockStatement",
          "statements": [
            {
              "_kind": "VariableDeclaration",
              "name": {
                "_kind": "Object",
                "properties": [
                  {
                    "_kind": "Identifier",
                    "name": "error",
                    "type": undefined,
                  },
                  {
                    "_kind": "Identifier",
                    "name": "result",
                    "type": undefined,
                  },
                ],
              },
              "type": "const",
              "value": {
                "_kind": "Identifier",
                "name": "ctx",
                "type": undefined,
              },
            },
            {
              "_kind": "IfStatement",
              "alternate": undefined,
              "condition": {
                "_kind": "Identifier",
                "name": "error",
                "type": undefined,
              },
              "consequent": {
                "_kind": "BlockStatement",
                "statements": [
                  {
                    "_kind": "CallExpression",
                    "arguments": [
                      {
                        "_kind": "Identifier",
                        "name": "error.message",
                        "type": undefined,
                      },
                      {
                        "_kind": "Identifier",
                        "name": "erorr.type",
                        "type": undefined,
                      },
                    ],
                    "callee": {
                      "_kind": "Identifier",
                      "name": "util.error",
                      "type": undefined,
                    },
                    "optional": false,
                  },
                ],
              },
            },
            {
              "_kind": "ReturnStatement",
              "value": {
                "_kind": "Identifier",
                "name": "result",
                "type": undefined,
              },
            },
          ],
        },
        "name": {
          "_kind": "Identifier",
          "name": "response",
          "type": undefined,
        },
        "parameters": [
          {
            "_kind": "Identifier",
            "name": "ctx",
            "type": {
              "_kind": "TypeIdentifier",
              "name": "Context",
              "parameters": [
                {
                  "_kind": "TypeIdentifier",
                  "name": "unknown",
                  "parameters": undefined,
                },
                {
                  "_kind": "TypeIdentifier",
                  "name": "Record",
                  "parameters": [
                    {
                      "_kind": "TypeIdentifier",
                      "name": "string",
                      "parameters": undefined,
                    },
                    {
                      "_kind": "TypeIdentifier",
                      "name": "unknown",
                      "parameters": undefined,
                    },
                  ],
                },
                {
                  "_kind": "TypeIdentifier",
                  "name": "undefined",
                  "parameters": undefined,
                },
                {
                  "_kind": "TypeIdentifier",
                  "name": "undefined",
                  "parameters": undefined,
                },
                {
                  "_kind": "TypeIdentifier",
                  "name": "unknown",
                  "parameters": undefined,
                },
              ],
            },
          },
        ],
      },
    },
  ],
}
`;
